{% extends 'base.html' %}

{% block content %}

<div class="container" style="margin-top: 100px; margin-bottom: 50px;">
    <div class="glass-panel">
        <header class="table-title">
            <div>
                <h1 style="font-size: 2rem;">Admin <span class="text-gradient">Dashboard</span></h1>
                <p style="color: var(--text-secondary);">Manage registrations and export data</p>
            </div>
            <div class="actions" style="display: flex; gap: 15px;">
                <a href="{{ url_for('admin.scanner') }}" class="btn-outline"
                    style="text-decoration: none; font-size: 0.9rem;">
                    ðŸŽ¯ Scanner
                </a>
                <a href="{{ url_for('admin.submissions') }}" class="btn-outline"
                    style="text-decoration: none; font-size: 0.9rem;">
                    ðŸ“‚ Submissions
                </a>
                <a href="{{ url_for('admin.analytics') }}" class="btn-outline"
                    style="text-decoration: none; font-size: 0.9rem;">
                    ðŸ“Š Analytics
                </a>
                <a href="{{ url_for('admin.download_csv') }}" class="btn-primary"
                    style="text-decoration: none; font-size: 0.9rem;">
                    <i data-lucide="download" style="width: 16px; display: inline-block; vertical-align: middle;"></i>
                    Export CSV
                </a>
                <a href="{{ url_for('admin.logout') }}" class="btn-secondary"
                    style="text-decoration: none; font-size: 0.9rem;">Logout</a>
            </div>
        </header>

        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Register No</th>
                        <th>Dept</th>
                        <th>Year</th>
                        <th>College</th>
                        <th>Event</th>
                        <th>Phone</th>
                        <th>Date</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% if registrations %}
                    {% for reg in registrations %}
                    <tr>
                        <td>#{{ reg.id }}</td>
                        <td>{{ reg.full_name }}</td>
                        <td>{{ reg.register_number }}</td>
                        <td>{{ reg.department }}</td>
                        <td>{{ reg.year }}</td>
                        <td>{{ reg.college_name }}</td>
                        <td><span style="color: var(--neon-cyan);">{{ reg.event }}</span></td>
                        <td>{{ reg.phone }}</td>
                        <td>{{ reg.created_at.strftime('%Y-%m-%d') }}</td>
                        <td style="display: flex; gap: 10px;">
                            <a href="{{ url_for('user.id_card', reg_id=reg.id) }}" title="View ID Pass"
                                style="color: var(--neon-cyan);">
                                <i data-lucide="id-card" style="width: 18px;"></i>
                            </a>
                            <a href="{{ url_for('user.certificate', reg_id=reg.id) }}" title="View Certificate"
                                style="color: var(--neon-purple);">
                                <i data-lucide="award" style="width: 18px;"></i>
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                    {% else %}
                    <tr>
                        <td colspan="9" style="text-align: center; padding: 2rem; color: var(--text-secondary);">
                            No registrations found.
                        </td>
                    </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
    </div>
</div>

{% endblock %}